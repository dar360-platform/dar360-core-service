# ============================================
# Server Configuration
# ============================================
server:
  servlet:
    context-path: /grc-user-api/rs/v1
  port: ${SERVER_PORT:8091}
  timezone: Asia/Dubai

# ============================================
# Spring Framework Configuration
# ============================================
spring:
  config:
    import: optional:file:.env.properties
  jackson:
    time-zone: Asia/Dubai


  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/postgres}
    username: ${SPRING_DATASOURCE_USERNAME:postgres}
    password: ${SPRING_DATASOURCE_PASSWORD:postgres}
    hikari:
      maximum-pool-size: ${HIKARI_MAX_POOL_SIZE:7}
      minimum-idle: ${HIKARI_MIN_IDLE:2}
      connection-timeout: ${HIKARI_CONNECTION_TIMEOUT:30000}
      idle-timeout: ${HIKARI_IDLE_TIMEOUT:600000}
      max-lifetime: ${HIKARI_MAX_LIFETIME:1800000}

  jpa:
    hibernate:
      ddl-auto: update
    # show-sql: true
    properties:
      hibernate:
        # format_sql: true

  servlet:
    multipart:
      max-file-size: ${MAX_FILE_SIZE:500MB}
      max-request-size: ${MAX_REQUEST_SIZE:500MB}

  flyway:
    enabled: false

# ============================================
# Application Business Logic
# ============================================
app:
  source: UserService
  last-login:
    expired:
      inactive: 90
      warning: 10
  password:
    expired:
      inactive: 90
      send-notification: 90,30,7
  user-token-session-expired: 30
  user-session-timeout-minutes: 1440
  user:
    default-password: ${USER_DEFAULT_PASSWORD:1234}

# ============================================
# External Service URLs
# ============================================
path:
  url:
    notification: ${NOTIFICATION_SERVICE_URL:http://localhost:8093/grc-notification-integration-api/rs/v1}
    setup-password: ${SETUP_PASSWORD_URL:https://example.com/setup-password}
    forgot-password: ${FORGOT_PASSWORD_URL:https://example.com/forgot-password}
    # Optional: Product service integration (only needed if FEATURE_PRODUCT_SERVICE_ENABLED=true)
    product: ${PRODUCT_SERVICE_URL:http://localhost:8086/products}

# ============================================
# API Documentation (Swagger/OpenAPI)
# ============================================
springdoc:
  api-docs:
    path: /v3/api-docs

# ============================================
# Actuator / Health Monitoring
# ============================================
management:
  endpoints:
    web:
      exposure:
        include: health,info
      base-path: /actuator2
  endpoint:
    health:
      show-details: always

# ============================================
# Security - Secret Encryption (Optional)
# ============================================
app-config:
  secret-encryption:
    enabled: ${SECRET_ENCRYPTION_ENABLED:false}
    encryption-key: ${SECRET_ENCRYPTION_KEY:}
    variables: ${SECRET_ENCRYPTION_VARIABLES:}

# ============================================
# Feature Flags
# ============================================
feature:
  product-service:
    enabled: ${FEATURE_PRODUCT_SERVICE_ENABLED:false}
